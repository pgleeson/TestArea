
func f() {local x, i

	   
   strdef host
   system("hostname", host)
  print "-----------------------------------         On host: ", host


	x = $1*$1
	for i=1,1000000 hoc_cross_x_ = i
	printf("On host: %s, in func f(), %g = f(%g)\n",host, x, $1)
	return x
}

objref pc
pc = new ParallelContext()

pc.runworker()


startsw()

 
for i=1,50 {
	pc.submit("f", i)
}


x = 0
while (pc.working()) {
	x += pc.retval
	//printf("f(%d)=%g  x=%g\n", pc.upkscalar, pc.retval, x)
	if (i < 20) {
        print "====================================================================      Less than 20"
		pc.submit("f", i)
		i += 1
	}
}

pc.done()


print "Stopwatch at: ", stopsw()
